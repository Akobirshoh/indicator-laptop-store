{"ast":null,"code":"import axios from 'axios';\nimport { API_BASE_URL, API_ENDPOINTS } from './config';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Интерцептор для добавления токена к каждому запросу\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Интерцептор для обработки ошибок\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/';\n  }\n  return Promise.reject(error);\n});\n\n// ===== AUTH API =====\nexport const login = (email, password) => {\n  const formData = new URLSearchParams();\n  formData.append('username', email);\n  formData.append('password', password);\n  return api.post(API_ENDPOINTS.LOGIN, formData, {\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n};\nexport const register = (email, password, full_name) => api.post(API_ENDPOINTS.REGISTER, {\n  email,\n  password,\n  full_name\n});\nexport const getCurrentUser = () => {\n  const token = localStorage.getItem('token');\n  if (!token) return null;\n  try {\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    return {\n      email: payload.sub,\n      id: payload.id\n    };\n  } catch {\n    return null;\n  }\n};\n\n// ===== ITEMS API =====\nexport const getItems = (skip = 0, limit = 100, category_id = null, min_price = null, max_price = null) => {\n  const params = new URLSearchParams();\n  params.append('skip', skip);\n  params.append('limit', limit);\n  if (category_id) params.append('category_id', category_id);\n  if (min_price) params.append('min_price', min_price);\n  if (max_price) params.append('max_price', max_price);\n  return api.get(`${API_ENDPOINTS.ITEMS}?${params.toString()}`);\n};\nexport const getItemById = id => api.get(`${API_ENDPOINTS.ITEMS}${id}`);\nexport const createItem = itemData => api.post(API_ENDPOINTS.ITEMS, itemData);\nexport const updateItem = (id, itemData) => api.put(`${API_ENDPOINTS.ITEMS}${id}`, itemData);\nexport const deleteItem = id => api.delete(`${API_ENDPOINTS.ITEMS}${id}`);\n\n// ===== CATEGORIES API =====\nexport const getCategories = () => api.get(API_ENDPOINTS.CATEGORIES);\nexport const createCategory = categoryData => api.post(API_ENDPOINTS.CATEGORIES, categoryData);\n\n// ===== CART API =====\nexport const addToCart = (itemId, quantity = 1) => {\n  const params = new URLSearchParams();\n  params.append('item_id', itemId);\n  return api.post(`${API_ENDPOINTS.CART}?${params.toString()}`);\n};\nexport const getCart = () => api.get(API_ENDPOINTS.CART);\nexport const removeFromCart = itemId => api.delete(`${API_ENDPOINTS.CART}${itemId}`);\nexport const clearCart = () => api.delete(API_ENDPOINTS.CART);\n\n// ===== ORDERS API =====\nexport const createOrder = orderData => api.post(API_ENDPOINTS.ORDERS, orderData);\nexport const getOrders = () => api.get(API_ENDPOINTS.ORDERS);\nexport const getOrderById = id => api.get(`${API_ENDPOINTS.ORDERS}${id}`);\n\n// ===== SEARCH API =====\nexport const searchItems = query => api.get(`${API_ENDPOINTS.ITEMS}search?q=${encodeURIComponent(query)}`);\n\n// ===== ADMIN API =====\nexport const getAdminReports = () => api.get('/admin/reports/items');\nexport const getAdminStats = () => api.get('/admin/reports/stats');\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","API_ENDPOINTS","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","login","email","password","formData","URLSearchParams","append","post","LOGIN","register","full_name","REGISTER","getCurrentUser","payload","JSON","parse","atob","split","sub","id","getItems","skip","limit","category_id","min_price","max_price","params","get","ITEMS","toString","getItemById","createItem","itemData","updateItem","put","deleteItem","delete","getCategories","CATEGORIES","createCategory","categoryData","addToCart","itemId","quantity","CART","getCart","removeFromCart","clearCart","createOrder","orderData","ORDERS","getOrders","getOrderById","searchItems","query","encodeURIComponent","getAdminReports","getAdminStats"],"sources":["C:/Users/user/Desktop/proj/indicator-laptop-store/frontend/src/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { API_BASE_URL, API_ENDPOINTS } from './config';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Интерцептор для добавления токена к каждому запросу\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Интерцептор для обработки ошибок\r\napi.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    if (error.response?.status === 401) {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      window.location.href = '/';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// ===== AUTH API =====\r\nexport const login = (email, password) => {\r\n  const formData = new URLSearchParams();\r\n  formData.append('username', email);\r\n  formData.append('password', password);\r\n\r\n  return api.post(API_ENDPOINTS.LOGIN, formData, {\r\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n  });\r\n};\r\n\r\nexport const register = (email, password, full_name) => \r\n  api.post(API_ENDPOINTS.REGISTER, { email, password, full_name });\r\n\r\nexport const getCurrentUser = () => {\r\n  const token = localStorage.getItem('token');\r\n  if (!token) return null;\r\n  \r\n  try {\r\n    const payload = JSON.parse(atob(token.split('.')[1]));\r\n    return { email: payload.sub, id: payload.id };\r\n  } catch {\r\n    return null;\r\n  }\r\n};\r\n\r\n// ===== ITEMS API =====\r\nexport const getItems = (skip = 0, limit = 100, category_id = null, min_price = null, max_price = null) => {\r\n  const params = new URLSearchParams();\r\n  params.append('skip', skip);\r\n  params.append('limit', limit);\r\n  if (category_id) params.append('category_id', category_id);\r\n  if (min_price) params.append('min_price', min_price);\r\n  if (max_price) params.append('max_price', max_price);\r\n\r\n  return api.get(`${API_ENDPOINTS.ITEMS}?${params.toString()}`);\r\n};\r\n\r\nexport const getItemById = (id) => api.get(`${API_ENDPOINTS.ITEMS}${id}`);\r\n\r\nexport const createItem = (itemData) => api.post(API_ENDPOINTS.ITEMS, itemData);\r\n\r\nexport const updateItem = (id, itemData) => api.put(`${API_ENDPOINTS.ITEMS}${id}`, itemData);\r\n\r\nexport const deleteItem = (id) => api.delete(`${API_ENDPOINTS.ITEMS}${id}`);\r\n\r\n// ===== CATEGORIES API =====\r\nexport const getCategories = () => api.get(API_ENDPOINTS.CATEGORIES);\r\n\r\nexport const createCategory = (categoryData) => api.post(API_ENDPOINTS.CATEGORIES, categoryData);\r\n\r\n// ===== CART API =====\r\nexport const addToCart = (itemId, quantity = 1) => {\r\n  const params = new URLSearchParams();\r\n  params.append('item_id', itemId);\r\n  return api.post(`${API_ENDPOINTS.CART}?${params.toString()}`);\r\n};\r\n\r\nexport const getCart = () => api.get(API_ENDPOINTS.CART);\r\n\r\nexport const removeFromCart = (itemId) =>\r\n  api.delete(`${API_ENDPOINTS.CART}${itemId}`);\r\n\r\nexport const clearCart = () =>\r\n  api.delete(API_ENDPOINTS.CART);\r\n\r\n// ===== ORDERS API =====\r\nexport const createOrder = (orderData) =>\r\n  api.post(API_ENDPOINTS.ORDERS, orderData);\r\n\r\nexport const getOrders = () =>\r\n  api.get(API_ENDPOINTS.ORDERS);\r\n\r\nexport const getOrderById = (id) =>\r\n  api.get(`${API_ENDPOINTS.ORDERS}${id}`);\r\n\r\n// ===== SEARCH API =====\r\nexport const searchItems = (query) =>\r\n  api.get(`${API_ENDPOINTS.ITEMS}search?q=${encodeURIComponent(query)}`);\r\n\r\n// ===== ADMIN API =====\r\nexport const getAdminReports = () =>\r\n  api.get('/admin/reports/items');\r\n\r\nexport const getAdminStats = () =>\r\n  api.get('/admin/reports/stats');\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}